= Ссылка на карточку

Элемент управления `_Ссылка на карточку_` предназначен для выбора и отображения ссылки на определённую карточку.

include::partial$restart-required-2.adoc[]

.Элемент управления "Ссылка на карточку" в режиме просмотра
image::card-link.png[Элемент управления "Ссылка на карточку" в режиме просмотра]

.ЭУ позволяет:
* Открывать и изменять ссылку.
* Открывать файл карточки, на которую указывает ссылка.

Возможность добавления/удаления/изменения ссылки определяется доступностью данной операции по ролевой модели.

Выбор ссылки осуществляется в диалоговом окне, интерфейс по умолчанию которого представлен на следующем рисунке.

.Выбор ссылки на карточку
image::card-link-select-card.png[Выбор ссылки на карточку]

Название карточки в ссылке по умолчанию формируется с помощью расширения {wc}а. Если метод расширения для формирования не найден, в ссылке указывается дайджест карточки.

[NOTE]
====
include::user:partial$excerpts.adoc[tags=query]
====

== Свойства

include::partial$properties.adoc[tags=general]

=== Внешний вид

include::partial$properties.adoc[tags=displayLabelWithoutDefinition]

include::partial$properties.adoc[tags=hint]

include::partial$properties.adoc[tags=labelText]

==== Показывать иконку

Включает или выключает отображение иконок у элемента управления.

CAUTION: Свойство доступно, только когда выбран <<search-param,поисковый параметр>>.

=== Данные

include::partial$properties.adoc[tags=extendedDataSource]

include::partial$properties.adoc[tags=dataSource]

==== Поле данных

Поле карточки, имеющее тип `RefCardId`.

==== Операция редактирования

Выбор операции для редактирования значения ЭУ. Если операция недоступна пользователю, то изменение ссылки будет недоступно. Если операция не выбрана, то возможность изменения ссылки не проверяется.

Если значение `*Операции редактирования*` наследуется от родительского Блока, название свойства меняется на `*Операция редактирования (наследовано)*`.

==== Текст при отсутствии значения

Текст, отображаемый в ЭУ, когда ссылка не выбрана.

`*Локализуемый*`

==== Тип карточки для ссылки
Определяет типы карточек, ссылки на которые можно добавлять. Карточки других типов не отображаются при добавлении ссылки. Если значение не выбрано, для выбора будут доступны карточки всех типов.

=== Поведение

include::partial$properties.adoc[tags=visibility]

include::partial$properties.adoc[tags=addCss]

[#useFolderList]
==== Использовать список папок

Настройка списка папок, из которых пользователь сможет выбирать карточку для ссылки в режиме выбора "В текущей папке".

.Список папок
image::links-select-folders.png[Список папок]

Если список папок пуст, не отмечено ни одной добавленной папки или переключатель *Все папки / Только выбранные папки* в положении *Все папки*, пользователь сможет добавлять ссылки на карточки из любых доступных папок.

==== Обязательное

Определяет требование к заполнению значения ЭУ до сохранения карточки:

* Когда флаг установлен, значение ЭУ должно быть присвоено, иначе карточка не будет сохранена. При этом ЭУ помечается предупреждающим сообщением.
* Когда флаг не установлен, присваивать значение необязательно.

include::partial$properties.adoc[tags=editOperationForVisibility]

include::partial$properties.adoc[tags=disabled]

include::partial$properties.adoc[tags=byTab]

[#searchQuery]
==== Поисковый запрос

Открывает окно выбора поискового запроса, который будет использоваться при поиске карточки для ссылки в режиме выбора "Везде".

.Выбор поискового запроса
image::links-select-query.png[Выбор поискового запроса]

По умолчанию используется собственный поисковый запрос {wc}а: "Ссылки". Данный запрос позволяет искать карточки по дайджесту, автору, дате создания и изменения.

[#search-param]
==== Поисковый параметр

Позволяет выбрать параметр поискового запроса, указанного в предыдущем свойстве.

==== Задержка поиска

Позволяет настроить задержку поиска после ввода поисковых символов. Значение по умолчанию: 500 мс.

==== Минимальное количество символов

Задаёт минимальное количество символов для поиска Значение по умолчанию: 3.

==== Режим редактирования

Определяет вариант отображения элемента управления и возможность изменения его значения:

* *_По месту_* -- значение изменяется в отдельном окне, которое открывается нажатием на элемент управления. Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
* *_Редактирование_* -- значение изменяется непосредственно в элементе управления. Данный вариант может быть выбран в разметке режима редактирования и просмотра.
+
Если элемент с режимом *_Редактирование_* добавлен в разметку просмотра, необходимо самостоятельно обеспечить сохранение его значения. Например, с использованием скриптов карточек.
* *_Без редактирования_* -- значение изменить нельзя.

include::partial$properties.adoc[tags=stdCss]

=== События

==== Перед закрытием окна

Вызывается перед закрытием окна выбора ссылки.

==== Перед открытием карточки

Вызывается при использовании команды открытия карточки по ссылке.

==== Перед открытием окна

Вызывается перед открытием окна выбора ссылки.

==== Перед открытием предпросмотра файла

Вызывается при использовании команды открытия окна предварительного просмотра файла карточки, на которую ведёт ссылка.

==== Перед удалением ссылки

Вызывается перед удалением ссылки.

==== После закрытия окна

Вызывается после закрытия окна выбора ссылки.

==== После открытия окна

Вызывается после открытия окна выбора ссылки.

==== После открытия предпросмотра файла

Вызывается после использования команды открытия окна предварительного просмотра файла карточки, на которую ведёт ссылка.

include::partial$properties.adoc[tags=dataChanged]

==== После удаления ссылки

Вызывается после удаления ссылки.

include::partial$properties.adoc[tags=mouseOver]

include::partial$properties.adoc[tags=mouseAway]

include::partial$properties.adoc[tags=focusGet]

include::partial$properties.adoc[tags=focusLoose]

include::partial$properties.adoc[tags=onClick]
